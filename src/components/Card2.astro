---
import Button from "./button.astro";
const data = await fetch(
  "https://ksreqhsmdxayccugiwmb.supabase.co/rest/v1/swingby",
  {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtzcmVxaHNtZHhheWNjdWdpd21iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM4MTk3MzAsImV4cCI6MjA0OTM5NTczMH0.PokJ8dTqtkRlPRLfB1cdL0grpnmsr5hdCpBQzVDHSJc",
    },
  }
).then((res) => res.json());

console.log(data);
---

<section class="grid_1-1-1">
  {
    data
      .filter((item) => item.type === "venue")
      .map((data) => (
        <a href={`${data.type}/${data.slug}`}>
          <div class="container" class={data.slug}>
            <img src={data.img} alt="" />
            <div class="bund">
              <div class="text">
                <h4>{data.title}</h4>
                <p>{data.bydel}</p>
                <p>{data.date_time}</p>
              </div>
              <div class="button">
                <Button variant="lilla_btn">More info</Button>
              </div>
            </div>
          </div>
        </a>
      ))
  }
</section>
